---
title: NDIS 中间驱动程序概述
description: NDIS 中间驱动程序概述
ms.assetid: 63e1b34b-c59e-4aa9-9551-ac9ccb8bcc82
keywords:
- 中级驱动程序 WDK 网络, 关于中间驱动程序
- NDIS 中间驱动程序 WDK, 关于中间驱动程序
- 堆栈 WDK 网络
- 内部绑定 WDK NDIS 中间
- 绑定 WDK NDIS 中间
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 801bb3961aca94af371bd8dbf5bba70b20229a48
ms.sourcegitcommit: fec48fa5342d9cd4cd5ccc16aaa06e7c3d730112
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/17/2019
ms.locfileid: "69565669"
---
# <a name="ndis-intermediate-drivers-overview"></a>NDIS 中间驱动程序概述





NDIS 驱动程序堆栈必须包含微型端口驱动程序和协议驱动程序, 并且还可以包括中间驱动程序。 由于中间驱动程序是可选的, 因此在处理中间驱动程序之前, 必须先了解微型端口驱动程序、协议驱动程序和 NDIS 之间的关系。

微型端口驱动程序控制 NIC 设备, 并与协议驱动程序的下边缘通信。 协议驱动程序实现了协议 (如 TCP/IP), 并且位于驱动程序堆栈中的微型端口驱动程序之上。 NDIS 提供的服务可简化微型端口驱动程序和协议驱动程序的开发和维护。

下图演示了微型端口驱动程序、协议驱动程序和 NDIS 之间的关系。

![说明微型端口驱动程序、协议驱动程序和 ndis 之间的关系的关系图 ](images/ndisdrvr.png)

NDIS 微型端口驱动程序和协议驱动程序通过标准 NDIS 接口绑定在一起。

NDIS 中间驱动程序在其上部边缘提供一个协议驱动程序接口, 在其下边缘提供一个微型端口驱动程序接口。 中间驱动程序的协议接口允许它通过微型端口驱动程序接口加载到驱动程序之上。 因此, 中间驱动程序可以加载在小型小型驱动程序或其他中间驱动程序之上。 中间驱动程序的微型端口接口允许它在带有协议下限协议的驱动程序下加载。 因此, 中间驱动程序可以加载到以下协议驱动程序或其他中间驱动程序的下面。

下图说明了微型端口驱动程序、协议驱动程序、中间驱动程序和 NDIS 之间的关系。

![说明微型端口驱动程序、协议驱动程序、中间驱动程序和 ndis 之间的关系的关系图 ](images/intdriver.png)

中间驱动程序微型端口接口称为虚拟小型端口。 它是虚拟的, 因为它不直接控制物理设备。 相反, 它依赖于基础微型端口驱动程序与物理设备通信。

中间驱动程序和其他驱动程序之间的绑定称为外部绑定。 NDIS 控制外部绑定。 虚拟微型端口的上边缘绑定到下一个更高的驱动程序, 该驱动程序可以是协议驱动程序或其他中间驱动程序。 中间驱动程序协议的下边缘绑定到下一个较低的驱动程序, 该驱动程序可以是另一个中间驱动程序, 也可以是基础微型端口驱动程序。

虚拟微型端口和中间驱动程序协议的上边缘的下边缘不需要外部绑定。 相反, 中间驱动程序在内部绑定其虚拟微型端口和其协议。 这是特定于实现的内部绑定不受 NDIS 控制。

下图演示了虚拟微型端口和中间驱动程序协议之间的内部绑定。

![说明虚拟微型端口和中间驱动程序协议之间的内部绑定的关系图](images/intbindings.png)

有两种类型的 NDIS 中间驱动程序: 筛选中间驱动程序和 MUX 中间驱动程序。 以下主题描述了这些驱动程序类型:

[NDIS 筛选器中间驱动程序](ndis-filter-intermediate-drivers.md)

[NDIS MUX 中间驱动程序](ndis-mux-intermediate-drivers.md)

 

 





