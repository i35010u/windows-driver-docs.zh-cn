---
title: 访问掩码
description: 访问掩码
ms.assetid: eb379196-7a10-4d52-8b81-825550ebbbb0
keywords:
- 安全描述符 WDK 文件系统，访问掩码
- 描述符文件系统、访问掩码
- 访问掩码 WDK 文件系统
- 一般权限 WDK 文件系统
- 标准权限 WDK 文件系统
- 特定权限 WDK 文件系统
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: c0dd057bb4451771fc5b0dfc717eb7534c6e2421
ms.sourcegitcommit: 7b9c3ba12b05bbf78275395bbe3a287d2c31bcf4
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/28/2020
ms.locfileid: "89066264"
---
# <a name="access-mask"></a>访问掩码


## <span id="ddk_sec_access_mask_if"></span><span id="DDK_SEC_ACCESS_MASK_IF"></span>


访问掩码的功能是以压缩形式描述访问权限。 为简化访问管理，访问掩码包含一组四位（ *一般权限*），这些权限通过使用函数 [**RtlMapGenericMask**](/windows-hardware/drivers/ddi/ntddk/nf-ntddk-rtlmapgenericmask)转换为一组更详细的权限。

下图说明了访问掩码。

![说明访问掩码的关系图](images/fssecurity-03.png)

一般权限是下列其中一项：

-   通用 \_ 读取-读取由对象维护的信息的权限。

-   泛型 \_ 写入-写入由对象维护的信息的权限。

-   泛型 \_ 执行：执行或查找对象的权限。

-   一般 \_ 都是读取、写入和执行对象的权限。

请注意，可以将这些权限组合 (一般 \_ 读取和泛型 \_ 写入都可以请求，例如，) 并要求对每个泛型权限都需要权限的联合。 此模式模拟了用于控制对 UNIX 资源的访问的 UNIX "rwx" 访问权限。 访问掩码中的一般权限会简化 Windows 上的应用程序开发，因为这些权限屏蔽了不同对象类型的不同安全权限。

以下 *标准权限* 集适用于所有对象类型：

-   DELETE-删除特定对象的权限。

-   读取 \_ 控制-读取对象 (安全) 信息的权限。

-   写入 \_ DAC-修改控件 (安全) 信息的权限。

-   写入 \_ 所有者-修改对象的所有者 SID 的权限。 请记住，所有者始终有权修改对象。

-   同步—在给定对象上等待的权限 (假设这是对象) 的有效概念。

访问掩码的低16位表示特定权限。 这些特定权限的含义对于相关对象是唯一的。 对于文件系统，主要兴趣是文件对象的特定权限。 对于文件对象，特定权限通常以不同的方式解释，具体取决于文件对象是表示文件还是目录。 对于文件，一般解释如下：

-   **文件 \_读取 \_ 数据**-从给定文件读取数据的权限。

-   **文件 \_写入 \_ 数据**-将数据写入到) 文件的现有范围内的给定文件 (的权限。

-   **文件 \_追加 \_ 数据**-扩展给定文件的权限。

-   **文件 \_读取 \_ EA**-读取文件的扩展属性的权限。

-   **文件 \_写入 \_ EA**-修改文件扩展属性的权限。

-   **文件 \_EXECUTE**-本地执行给定文件的权限。 执行在远程共享上存储的文件需要 "读取" 权限，因为该文件是从服务器读取的，而是在客户端上执行的。

-   **文件 \_读取 \_ 属性**-读取文件的属性信息的权限。

-   **文件 \_写入 \_ 属性**-修改文件的属性信息的权限。

对于目录，使用相同的位值，但在以下情况下，它们的解释有所不同：

-   **文件 \_列出 \_ 目录**-列出目录内容的权限。

-   **文件 \_添加 \_ 文件**-在目录中创建新文件的权限。

-   **文件 \_添加 \_ 子目录**-在目录中创建新目录 (子目录) 的权限。

-   **文件 \_读取 \_ EA**-读取给定目录的扩展属性的权限。

-   **文件 \_写入 \_ EA**—写入给定目录的扩展属性的权限。

-   **文件 \_遍历**-访问目录中的对象的权限。 文件 \_ 遍历访问权限与文件 \_ 列表目录访问权限不同 \_ 。 如果拥有文件 \_ 列表 \_ 目录访问权限，实体就可以获取目录内容的列表，而文件 \_ 遍历访问权限会为实体提供访问对象的权限。 不带 FILE \_ LIST \_ DIRECTORY 访问权限的调用方可以打开它知道的文件，但无法获取该目录的内容列表。

-   **文件 \_删除 \_ 子级**-删除当前目录中的文件或目录的权限。

-   **文件 \_读取 \_ 属性**-读取目录的属性信息的权限。

-   **文件 \_写入 \_ 属性**-修改目录属性信息的权限。

一般权限到文件对象的标准和特定权限的实际映射由 i/o 管理器定义。 使用 [**IoGetFileObjectGenericMapping**](/windows-hardware/drivers/ddi/ntddk/nf-ntddk-iogetfileobjectgenericmapping)的文件系统可以检索此映射。 通常，在 \_ \_ 调用文件系统之前，由 i/o 管理器在 IRP MJ 创建处理过程中完成此映射。 但这可能是通过文件系统检查特定操作的安全性来完成的， (专用 FSCTL 操作，例如) 。

 

