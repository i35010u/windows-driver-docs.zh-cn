---
title: 筛选器管理器模型的优势
description: 筛选器管理器模型的优势
ms.assetid: 8e3449dc-7c78-4f78-97c4-89b20001e91b
keywords:
- 筛选器管理器 WDK 文件系统微筛选器，优点
ms.date: 10/16/2019
ms.localizationpriority: medium
ms.openlocfilehash: b7af1129e8ee5dceacb0171660efe3c32f5b38b2
ms.sourcegitcommit: 2a1c24db881ed843498001493c3ce202c9aa03f1
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/16/2019
ms.locfileid: "74128491"
---
# <a name="advantages-of-the-filter-manager-model"></a>筛选器管理器模型的优势

筛选器管理器模型与现有旧筛选器驱动程序模型相比具有以下优势：

- **能够连接到 DAX 卷。** 旧文件系统筛选器驱动程序无法附加到直接访问（DAX）卷。

- **更好地控制筛选器加载顺序。** 与旧版筛选器驱动程序不同，可以随时加载微筛选器驱动程序，并将其附加到由其高度确定的适当位置。

- **在系统运行时能够卸载。** 不同于旧筛选器驱动程序，无法在系统运行时卸载该驱动程序，可以随时卸载微筛选器驱动程序，并且它可以在必要时防止卸载自身。 筛选器管理器将同步安全删除所有微筛选器驱动程序附件，并处理在卸载微筛选器驱动程序之后完成的操作。

- **仅处理必要操作的能力。** 筛选器管理器使用回调模型，在该模型中，微筛选器驱动程序可以选择要筛选的 i/o 操作类型（基于 IRP、fast i/o 或 FSFilter）。 微筛选器驱动程序只接收其已注册回调例程的 i/o 请求。 微筛选器驱动程序可以注册唯一的 preoperation 或 postoperation 回调例程，也可以同时注册这两者，还可以忽略某些类型的操作，如分页 i/o 和缓存 i/o。

- **更有效地使用内核堆栈。** 筛选器管理器经过优化，可减少它使用的内核堆栈数量，回调模型大大降低了微筛选器驱动程序对堆栈的影响。 筛选器管理器通过支持仅由堆栈中较低的驱动程序看到的筛选器启动 i/o，降低了递归 i/o 的影响。

- **冗余代码更少。** 筛选器管理器可以通过多种方式减少微筛选器驱动程序所需的代码量，例如，提供用于名称生成的基础结构和缓存文件名以供多个微筛选器驱动程序使用。 筛选器管理器会附加到卷，并在卷可用时通知微筛选器驱动程序。 筛选器管理器经过优化，可支持多处理器系统，这使得锁定的效率更高且不易出错。

- **降低了复杂性。** 筛选器管理器通过为常见功能提供支持例程（如命名、上下文管理、用户模式和内核模式间的通信，以及屏蔽文件系统之间的差异）来简化对 i/o 请求的筛选。 筛选器管理器代表微筛选器驱动程序（如挂起的 Irp）处理某些任务，并枚举并附加到文件系统堆栈。

- **更轻松地添加新操作。** 由于微筛选器驱动程序只为其将处理的 i/o 操作注册，因此可以将对新操作的支持添加到筛选器管理器，而不会破坏现有的微筛选器驱动程序。

- **更好地支持多个平台。** 微筛选器驱动程序可在任何支持筛选器管理器的 Windows 版本上运行。 如果微筛选器驱动程序注册在运行时不可用的 i/o 操作，筛选器管理器将不会为该操作调用微筛选器驱动程序。 微筛选器驱动程序可以通过编程方式确定功能是否可用，筛选器管理器结构是否设计为可扩展。

- **更好地支持用户模式应用程序。** 筛选器管理器为适用于微筛选器驱动程序的用户模式服务和控制程序提供了通用功能。 筛选器管理器用户模式库（Filterlib）启用用户模式服务或控制程序与微筛选器驱动程序之间的通信。 Filterlib 还为管理工具提供接口。
